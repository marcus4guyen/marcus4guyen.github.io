(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{106:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d}));var a=n(0),o=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=o.a.createContext({}),b=function(e){var t=o.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=b(e.components);return o.a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},m=o.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,i=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),p=b(n),m=a,d=p["".concat(i,".").concat(m)]||p[m]||u[m]||r;return n?o.a.createElement(d,l(l({ref:t},s),{},{components:n})):o.a.createElement(d,l({ref:t},s))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=m;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var s=2;s<r;s++)i[s]=n[s];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},90:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return l})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return b}));var a=n(3),o=n(7),r=(n(0),n(106)),i={title:"Required configuration"},l={unversionedId:"required-configuration",id:"required-configuration",isDocsHomePage:!1,title:"Required configuration",description:"This section, [empowered by the details about how we build a DocSearch",source:"@site/docs/required-configuration.md",slug:"/required-configuration",permalink:"/docs/required-configuration",version:"current",sidebar:"docs",previous:{title:"Dropdown Behavior",permalink:"/docs/behavior"},next:{title:"Tips for a good search",permalink:"/docs/tips"}},c=[{value:"The generic configuration example",id:"the-generic-configuration-example",children:[{value:"Overview of a clear layout",id:"overview-of-a-clear-layout",children:[]},{value:"Use the right classes as selectors",id:"use-the-right-classes-as-selectors",children:[]}]},{value:"Introduce global information as meta tags",id:"introduce-global-information-as-meta-tags",children:[]},{value:"Nice to have",id:"nice-to-have",children:[]}],s={toc:c};function b(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"This section, ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/how-do-we-build-an-index"}),"empowered by the details about how we build a DocSearch\nindex"),", gives you the best practices to optimize our crawl. Adopting this\nfollowing specification is required to let our crawler build the best experience\nfrom your website. You will need to update your website and follow these rules."),Object(r.b)("p",null,"Note: If your website is generated thanks to one of our supported tool, you do\nnot need to change your website as it is already compliant with our\nrequirements."),Object(r.b)("h2",{id:"the-generic-configuration-example"},"The generic configuration example"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "index_name": "example",\n  "start_urls": ["https://www.example.com/doc/"],\n  "sitemap_urls": ["https://www.example.com/sitemap.xml"],\n  "stop_urls": [],\n  "selectors": {\n    "lvl0": {\n      "selector": ".DocSearch-lvl0",\n      "global": true,\n      "default_value": "Documentation"\n    },\n    "lvl1": {\n      "selector": ".DocSearch-lvl1",\n      "global": true,\n      "default_value": "Chapter"\n    },\n    "lvl2": ".DocSearch-content .DocSearch-lvl2",\n    "lvl3": ".DocSearch-content .DocSearch-lvl3",\n    "lvl4": ".DocSearch-content .DocSearch-lvl4",\n    "lvl5": ".DocSearch-content .DocSearch-lvl5",\n    "lvl6": ".DocSearch-content .DocSearch-lvl6",\n    "text": ".DocSearch-content p, .DocSearch-content li"\n  },\n  "custom_settings": {\n    "attributesForFaceting": ["language", "version"]\n  },\n  "nb_hits": "OUTPUT OF THE CRAWL"\n}\n')),Object(r.b)("h3",{id:"overview-of-a-clear-layout"},"Overview of a clear layout"),Object(r.b)("p",null,"A website implementing these good practises will look simple and crystal clear.\nIt can have this following aspect:"),Object(r.b)("img",{src:"https://docsearch.algolia.com/img/assets/recommended-layout.png",alt:"Recommended layout for your page"}),Object(r.b)("p",null,"The main blue element will be your ",Object(r.b)("inlineCode",{parentName:"p"},".DocSearch-content")," container. More details\nin the following guidelines."),Object(r.b)("h3",{id:"use-the-right-classes-as-selectors"},"Use the right classes as ",Object(r.b)("a",Object(a.a)({parentName:"h3"},{href:"/docs/config-file#selectors"}),"selectors")),Object(r.b)("p",null,"You can add some specific static classes to help us find your content role.\nThese classes can not involve any style changes. These dedicated classes will\nhelp us to create a great learn-as-you-type experience from your documentation."),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Add a static class ",Object(r.b)("inlineCode",{parentName:"p"},"DocSearch-content")," to the main container of your textual\ncontent. Most of the time, this tag is a ",Object(r.b)("inlineCode",{parentName:"p"},"<main>")," or an ",Object(r.b)("inlineCode",{parentName:"p"},"<article>")," HTML\nelement.")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Every searchable ",Object(r.b)("inlineCode",{parentName:"p"},"lvl")," elements outside this main documentation container (for\ninstance in a sidebar) must be ",Object(r.b)("inlineCode",{parentName:"p"},"global")," selectors. They will be globally\npicked up and injected to every record built from your page. Be careful, the\nlevel value matters and every matching element must have an increasing level\nalong the HTML flow. A level ",Object(r.b)("inlineCode",{parentName:"p"},"X")," (for ",Object(r.b)("inlineCode",{parentName:"p"},"lvlX"),") should appear after a level ",Object(r.b)("inlineCode",{parentName:"p"},"Y"),"\nwhile ",Object(r.b)("inlineCode",{parentName:"p"},"X > Y"),".")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},Object(r.b)("inlineCode",{parentName:"p"},"lvlX")," selectors should use the standard title tags like ",Object(r.b)("inlineCode",{parentName:"p"},"h1"),", ",Object(r.b)("inlineCode",{parentName:"p"},"h2"),", ",Object(r.b)("inlineCode",{parentName:"p"},"h3"),",\netc. You can also use static classes. Set a unique ",Object(r.b)("inlineCode",{parentName:"p"},"id")," or ",Object(r.b)("inlineCode",{parentName:"p"},"name")," attribute to\nthese elements as detailed below.")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Every DOM elements matching the ",Object(r.b)("inlineCode",{parentName:"p"},"lvlX")," selectors must have a unique ",Object(r.b)("inlineCode",{parentName:"p"},"id")," or\n",Object(r.b)("inlineCode",{parentName:"p"},"name")," attribute. This will help the redirection to directly scroll down to\nthe exact place of the matching elements. These attributes define the right\nanchor to use.")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Every textual element (selector ",Object(r.b)("inlineCode",{parentName:"p"},"text"),") must be wrapped in a ",Object(r.b)("inlineCode",{parentName:"p"},"<p>")," or ",Object(r.b)("inlineCode",{parentName:"p"},"<li>"),"\ntag. This content must be atomic and splitted into small entities. Be careful\nto never nest one matching element into another one as it will create\nduplicates.")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Stay consistent and do not forget that we need to have some consistency along\nthe HTML flow ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/how-do-we-build-an-index"}),"as presented here"),"."))),Object(r.b)("h2",{id:"introduce-global-information-as-meta-tags"},"Introduce global information as meta tags"),Object(r.b)("p",null,"Our crawler automatically extracts information from our DocSearch specific meta\ntags:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-html"}),'<meta name="docsearch:language" content="en" />\n<meta name="docsearch:version" content="1.0.0" />\n')),Object(r.b)("p",null,"The crawl adds the ",Object(r.b)("inlineCode",{parentName:"p"},"content")," value of these ",Object(r.b)("inlineCode",{parentName:"p"},"meta")," tags to all records extracted\nfrom the page. The meta tags ",Object(r.b)("inlineCode",{parentName:"p"},"name")," must follow the ",Object(r.b)("inlineCode",{parentName:"p"},"docsearch:$NAME")," pattern.\n",Object(r.b)("inlineCode",{parentName:"p"},"$NAME")," is the name of the attribute set to all records."),Object(r.b)("p",null,"You can then ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://www.algolia.com/doc/guides/managing-results/refine-results/faceting/"}),"transform these attributes as ",Object(r.b)("inlineCode",{parentName:"a"},"facetFilters"))," to filter over\nthem from the UI. You will need to set the setting ",Object(r.b)("inlineCode",{parentName:"p"},"attributesForFaceting")," of\nthe Algolia index. You need to submit a PR on your associated configuration via\n",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/config-file#custom_settings-optional"}),"the DocSearch ",Object(r.b)("inlineCode",{parentName:"a"},"custom_settings")," setting"),"."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'"custom_settings": {\n  "attributesForFaceting": ["language", "version"]\n}\n')),Object(r.b)("p",null,"It enables you to filter on the value of these meta tags. The following example\nshows how to update the JS snippet to retrieve records from these pages."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'docsearch({\n  [\u2026],\n  algoliaOptions: {\n    \'facetFilters\': ["language:en", "version:1.0.0"]\n  },\n  [\u2026],\n});\n')),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"docsearch:version")," meta tag can be a set ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://html.spec.whatwg.org/dev/common-microsyntaxes.html#comma-separated-tokens"}),"of comma-separated tokens"),",\neach of which is a version relevant to the page. These tokens must be compliant\nwith ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://semver.org/"}),"the SemVer specification")," or only contain alphanumeric characters (e.g.\n",Object(r.b)("inlineCode",{parentName:"p"},"latest"),", ",Object(r.b)("inlineCode",{parentName:"p"},"next"),", etc.). As facet filters, these version tokens are\ncase-insensitive."),Object(r.b)("p",null,"For example, all records extracted from a page with the following meta tag:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-html"}),'<meta name="docsearch:version" content="2.0.0-alpha.62,latest" />\n')),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"version")," attribute of these records will be :"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'version:["2.0.0-alpha.62" , "latest"]\n')),Object(r.b)("h2",{id:"nice-to-have"},"Nice to have"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Your website should have ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://www.sitemaps.org/"}),"an updated sitemap"),". This is key to let our\ncrawler know what should be updated. Do not worry, we will still crawl your\nwebsite and discover embedded hyperlinks to find your great content.")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Every page needs to have their full context available. Using global elements\nmight help (see above).")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Make sure your documentation content is also available without JavaScript\nrendering on the client-side. If you absolutely need JavaScript turned on, you\nneed to ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/config-file#js_render-optional"}),"set ",Object(r.b)("inlineCode",{parentName:"a"},"js_render: true")," in your configuration"),"."))),Object(r.b)("p",null,"Any questions? ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"mailto:DocSearch@algolia.com"}),"Send us an email"),"."))}b.isMDXComponent=!0}}]);